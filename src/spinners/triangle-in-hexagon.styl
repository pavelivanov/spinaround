@import "../mixins/triangle-in-hexagon"


$triangle-container-width         = 104px
$triangle-height                  = $triangle-container-width / 2
$triangle-edge-size               = floor($triangle-container-width / math(3, 'sqrt'))
$triangle-container-height        = 2 * $triangle-edge-size
$animation-speed                  = 2.8s
$animation-function               = cubic-bezier(0.64, 2.11, 0.69, 0.57)

// cos(30deg) between edge and X
$triangle-container-margin-left   = floor(-1 * $triangle-edge-size * math(3, 'sqrt') / 4)
// cos(60deg) between edge and Y
$triangle-container-margin-top    = -1 * $triangle-edge-size / 4


@keyframes sod-triangle-in-hexagon--keyframe--rotate-hexagon
  0%
    margin $triangle-container-margin-top 0 0 $triangle-container-margin-left
    transform: rotate(30deg)
  16.666%
    margin $triangle-container-margin-top + 30px 0 0 $triangle-container-margin-left + 0
    transform: rotate(-30deg)
  33.333%
    margin $triangle-container-margin-top + 45px 0 0 $triangle-container-margin-left + 26px
    transform: rotate(-90deg)
  49.999%
    margin $triangle-container-margin-top + 30px 0 0 $triangle-container-margin-left + 52px
    transform: rotate(-150deg)
  66.666%
    margin $triangle-container-margin-top + 0 0 0 $triangle-container-margin-left + 52px
    transform: rotate(-210deg)
  83.333%
    margin $triangle-container-margin-top + -15px 0 0 $triangle-container-margin-left + 26px
    transform: rotate(-270deg)
  100%
    margin $triangle-container-margin-top 0 0 $triangle-container-margin-left
    transform: rotate(-330deg)


@keyframes sod-triangle-in-hexagon--keyframe--rotate-triangle
  100%
    transform: rotateX(180deg)


.sod-triangle-in-hexagon
  size 0
  margin $triangle-container-margin-top 0 0 $triangle-container-margin-left
  position: relative
  user-select none
  transform rotate(30deg)
  animation sod-triangle-in-hexagon--keyframe--rotate-hexagon $animation-speed steps(1) infinite
  &:after
    content ''
    display: block
    border-bottom $triangle-height solid $color
    border-left ($triangle-edge-size / 2) solid transparent
    border-right ($triangle-edge-size / 2) solid transparent
    absolute top 0 left 50%
    margin-left: -($triangle-edge-size / 2)
    margin-top: -1 * $triangle-height
    transform: rotateX(0deg)
    transform-origin 50% 100%
    animation sod-triangle-in-hexagon--keyframe--rotate-triangle ($animation-speed / 6) $animation-function infinite
